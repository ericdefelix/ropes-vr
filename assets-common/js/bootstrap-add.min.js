$(function () {
	// Give the chat widget a customizeable window height using data-chat-height attribute
	$('[data-element="chat-card"]').css({ height: $('[data-element="chat-card"]').data('chat-height') });

	// Show Mask Password Plugin
	$('*[data-target="password"]').each(function(index) {
		$(this).on('click', function() {
			var input_pass = $(this).prev('*[data-element="password"]');
			if (input_pass.attr('type') === 'password') {
				$(this).html('HIDE');
				input_pass.attr('type', 'text');
			}

			else if (input_pass.attr('type') === 'text') {
				$(this).html('SHOW');
				input_pass.attr('type', 'password');
			}

		});
	});

	// Custom Collapse for Submenus
	$('*[data-toggle="submenu"]').each(function() {
		var $this = $(this);

		$this.on('click', function() {
			var _target = $this.data('target'),
				target_elem = $(_target),
				$submenu = $('.sub-menu');

			if (target_elem.length) {
				if (target_elem.hasClass('in')) {
					return false;
				}
				else {	
					target_elem.show(0,function() {
						target_elem.addClass('in');
					});
					$('*[data-toggle="submenu"]').not(_target).find('.caret').toggleClass('open');
					$submenu.not(_target).hide();
					$submenu.not(_target).removeClass('in');
				}
			}

			else {
				return false;
			}

		});
	});


	// Build - Show and Hide Loader
	var loader_dom = '<div class="loader-mask"><div class="loader-container"><div class="loader-cell"><i class="md md-2x md-spin md-settings"></i></div></div></div>';
	var loader = $('*[data-loader]');

	$(document).ready(function() {
		loader.each(function() {
			if (loader.data('loader') == true ) {
				$(this).append(loader_dom);
			}
			else {
				loader.find(loader_dom).remove();
			}
		});
	});



})

// jQuery tinyDraggable v1.0.2
// https://github.com/Pixabay/jQuery-tinyDraggable
!function(e){e.fn.tinyDraggable=function(n){var t=e.extend({handle:0,exclude:0},n);return this.each(function(){var n,o,u=e(this),a=t.handle?e(t.handle,u):u;a.on({mousedown:function(a){if(!t.exclude||!~e.inArray(a.target,e(t.exclude,u))){a.preventDefault();var f=u.offset();n=a.pageX-f.left,o=a.pageY-f.top,e(document).on("mousemove.drag",function(e){u.offset({top:e.pageY-o,left:e.pageX-n})})}},mouseup:function(){e(document).off("mousemove.drag")}})})}}(jQuery);
